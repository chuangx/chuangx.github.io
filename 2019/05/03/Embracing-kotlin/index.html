<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>Embracing Kotlin | Coffee Thoughts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
  
</head>
</html>
<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2019/05/03/Embracing-kotlin/">Embracing Kotlin</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">May 03 2019</p>
  </section>

  <section class="article-entry">
    <p>When starting a new demo or toy project on android, kotlin becomes my go-to language. It has evolved a lot since 2017 when google makes it as first-class language for writing android apps. It has now stable coroutines in v1.3, kotlin native in beta, multi-platform supports, etc. You can definitely see where it‚Äôs trying to move to ;) As an android developer (for about 70% time), here are the things I love about kotlin.</p>
<a id="more"></a>
<h3 id="Concise-amp-readable-as-a-block"><a href="#Concise-amp-readable-as-a-block" class="headerlink" title="Concise &amp; readable as a block"></a>Concise &amp; readable as a block</h3><p>Let‚Äôs start demo by creating a notification channel for music playing service.</p>
<p>Typical java version</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NotificationManager notificationManager = (NotificationManager) getSystemService(Service.NOTIFICATION_SERVICE);</span><br><span class="line"><span class="keyword">if</span> (notificationManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">    NotificationChannel channel = <span class="keyword">new</span> NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT);</span><br><span class="line">    channel.enableLights(<span class="keyword">true</span>);</span><br><span class="line">    channel.setName(<span class="string">"funky music"</span>);</span><br><span class="line">    channel.setDescription(<span class="string">"music channel hosted by coffee-thoughts"</span>);</span><br><span class="line">    channel.setLightColor(Color.GREEN);</span><br><span class="line">    channel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);</span><br><span class="line">    notificationManager.createNotificationChannel(channel);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here is the kotlin implementation</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(getSystemService(Service.NOTIFICATION_SERVICE) <span class="keyword">as</span>? NotificationManager)?.createNotificationChannel(</span><br><span class="line">    NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT).apply &#123;</span><br><span class="line">        enableLights(<span class="literal">true</span>)</span><br><span class="line">        name = <span class="string">"funky music"</span></span><br><span class="line">        description = <span class="string">"music channel hosted by coffee-thoughts"</span></span><br><span class="line">        lightColor = Color.GREEN</span><br><span class="line">        lockscreenVisibility = Notification.VISIBILITY_PUBLIC</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>The kotlin version has 2 lines less of code? Hooray!<br>Well, when I use <strong><em>consice</em></strong> as the section title here, I didn‚Äôt really mean the number of lines code though. The kotlin implementation does have less code to write, but I won‚Äôt expect to use that to convince other folks to try out a new language. <em>(If you do get convinced by this reason, let me know, I‚Äôll still cheer for myself üçª)</em></p>
<p>Some differences from above examples, in kotlin‚Äôs implementation</p>
<ul>
<li><code>set</code> methods get replaced with kotlin generated synthetic properties</li>
<li>scope function <code>apply</code> eliminates intermediate local variables</li>
<li><code>as?</code> safe type casting &amp; <code>?.</code> if-not-null shorthand removes if-null checks</li>
</ul>
<p>If you know/familiar with kotlin syntax (if you‚Äôre not, leave out those syntax thing while reading), compared to java, kotlin code is much easier to read and understand, as <strong><em>there‚Äôre less noises and the control/execution flow is more intituive logically</em></strong>. The barebone structure of above example is</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notificationManager.createNotification(customized_notification_channel_instance)</span><br></pre></td></tr></table></figure>
<p>For the kotlin implementation, I would know what the code block is trying to do after the first line of the code but not for the java one. Kotlin is able to express above flow as expected while in java implementation, the <code>notificationManager</code> instance and its method call of <code>createNotification</code> just got cut off, you could workaround it by extracting it into helper function, but it‚Äôs just not something you get out of box.</p>
<h3 id="Nullable-amp-its-NPE"><a href="#Nullable-amp-its-NPE" class="headerlink" title="Nullable &amp; its NPE"></a><del>Nullable &amp; its NPE</del></h3><h3 id="Builder-style-method-usage"><a href="#Builder-style-method-usage" class="headerlink" title="Builder style method usage"></a><del>Builder style method usage</del></h3><h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><h3 id="Android-support"><a href="#Android-support" class="headerlink" title="Android support"></a>Android support</h3><h3 id="Sweet-syntax-sugars-and-other-‚Äòfun‚Äô-I-love"><a href="#Sweet-syntax-sugars-and-other-‚Äòfun‚Äô-I-love" class="headerlink" title="Sweet syntax sugars and other ‚Äòfun‚Äô I love"></a>Sweet syntax sugars and other ‚Äòfun‚Äô I love</h3><ul>
<li>data class</li>
<li>string interpolation</li>
<li>scope functions</li>
<li>lazy properties</li>
</ul>

  </section>
</article>

  <!-- <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="/images/avatar.jpeg" alt="avatar">
    <div class="grid-item">
      <p class="title"> Coffee Thoughts </p>
      <p class="subtitle"> üéØ Focusing & Drinking Coffee ‚òï </p>
    <div>
  </div></div></section>

  <section class="share-btns">
    <a class="twitter-share-button" data-size="large" data-via="chuang_xie" href="https://twitter.com/intent/tweet?text=Embracing Kotlin">
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>
 -->

  <!-- 
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'chuang';
  
  var disqus_url = 'https://github.com/chuangx/2019/05/03/Embracing-kotlin/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


   -->
</main>

</body>
</html>
